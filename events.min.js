~function(t){function n(t,n){if(!t)throw new Error("Event name is required");return function(e){var i=o(this);return"function"==typeof e?i.sub(t,e,n):void i.pub(t,new a(this,e))}}var e=function(t){this.$events={},this.ctx=t},i="HybridEventHub"+Date.now(),o=function(t){return t[i]||(t[i]=new e(t))},s=e.prototype,r=function(t,n){this.$callbacks=[],this.$options=n||{},this.$name=t},c=r.prototype,a=function(t,n){this.target=t,this.data=n};c.add=function(t,n){var e=this,i=e.$callbacks,o=e.$options,s=o.setup,r=o.add,c=e.$name,a=i.length;return i.push(t),s&&!a&&s.call(n,c),r&&r.call(n,c),function(){e.remove(t,n)}},c.toggle=function(t,n){return this[~this.$callbacks.indexOf(t)?"remove":"add"](t,n)},c.remove=function(t,n){var e=this.$callbacks,i=this.$name,o=e.indexOf(t),s=this.$options,r=s.remove,c=s.teardown;~o&&(e.splice(o,1),r&&r.call(n,i),c&&!e.length&&c.call(n,i))},c.fire=function(t){var n=this.$callbacks;n.length&&(n=n.slice(0),n.forEach(function(n){n.call(t.target,t)}))},s.sub=function(t,n,e){var i=this.$events[t];return i||(this.$events[t]=i=new r(t,e)),i.toggle(n,this.ctx)},s.pub=function(t,n){this.$events[t].fire(n)},t.HybridEvent=n}(window);